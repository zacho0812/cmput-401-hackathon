generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum JobStatus {
  APPLIED
  REJECTED
  INTERVIEW
  OFFER
  NOT_APPLIED
  ACCEPTED
}

model User {
  id     String  @id @default(uuid())
  jobs   Job[]
  resume Resume?

  logs Log[]
}

model Job {
  id            String    @id @default(uuid())
  user          User      @relation(fields: [userid], references: [id], onDelete: Cascade)
  userid        String
  //Logs Log[]
  companyName   String
  positionTitle String
  status        JobStatus @default(NOT_APPLIED)
  location      String?
  deadline      DateTime?
  dateapplied   DateTime?
  notes         String?
}

model Resume {
  id     String @id @default(uuid())
  userid String @unique
  user   User   @relation(fields: [userid], references: [id], onDelete: Cascade)
  data   Json?
}

enum CommType {
  EMAIL
  PHONE
  IN_PERSON
  LINKEDIN
  OTHER
}

model Log {
  id      String   @id @default(uuid())
  user    User     @relation(fields: [userid], references: [id], onDelete: Cascade)
  userid  String
  type    CommType @default(EMAIL)
  contact String
  notes   String?

  //jobid String
  //job Job @relation(fields: [jobid],references: [id],onDelete: Cascade)
  //title String
  //desc String?
}
